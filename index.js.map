{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '48447542-64438fdfaeeaa1a5314542701';\nconst BASE_URL = 'https://pixabay.com/api/';\nconst PER_PAGE = 15;\n\nexport const fetchImages = async (query, page = 1) => {\n  const url = `${BASE_URL}?key=${API_KEY}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&per_page=${PER_PAGE}&page=${page}`;\n  try {\n    const response = await axios.get(url);\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    return { hits: [], totalHits: 0 };\n  }\n};\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nlet lightbox;\n\nexport const renderImages = (images, append = false) => {\n  const gallery = document.getElementById('gallery');\n  if (!append) {\n    gallery.innerHTML = '';\n  }\n  if (images.length === 0) {\n    iziToast.warning({\n      title: 'Error',\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  const imageElements = images\n    .map(image => {\n      return `\n        <a href=\"${image.largeImageURL}\" class=\"gallery-item\">\n          <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" class=\"gallery-image\" />\n          <div class=\"gallery-info\">\n            <div class=\"gallery-info-item\">\n              <p class=\"info-item-title\">Likes</p>\n              <p>${image.likes}</p>\n            </div>\n            <div class=\"gallery-info-item\">\n              <p class=\"info-item-title\">Views</p>\n              <p>${image.views}</p>\n            </div>\n            <div class=\"gallery-info-item\">\n              <p class=\"info-item-title\">Comments</p>\n              <p>${image.comments}</p>\n            </div>\n            <div class=\"gallery-info-item\">\n              <p class=\"info-item-title\">Downloads</p>\n              <p>${image.downloads}</p>\n            </div>\n          </div>\n        </a>`;\n    })\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', imageElements);\n\n  if (lightbox) {\n    lightbox.refresh();\n  } else {\n    lightbox = new SimpleLightbox('.gallery-item', {});\n  }\n\n  const { height: cardHeight } =\n    gallery.firstElementChild.getBoundingClientRect();\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n};\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  lightbox = new SimpleLightbox('.gallery-item', {});\n});\n","import { fetchImages } from './js/pixabay-api.js';\nimport { renderImages } from './js/render-functions.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst PER_PAGE = 15;\nlet currentPage = 1;\nlet currentQuery = '';\n\nconst form = document.getElementById('search-form');\nconst loader = document.getElementById('loader');\nconst loadMoreBtn = document.createElement('button');\nloadMoreBtn.textContent = 'Load more';\nloadMoreBtn.classList.add('btn-more');\nloadMoreBtn.style.display = 'none';\ndocument.body.appendChild(loadMoreBtn);\n\nform.addEventListener('submit', async event => {\n  event.preventDefault();\n  const queryInput = document.getElementById('search-input');\n  currentQuery = queryInput.value.trim();\n  currentPage = 1;\n\n  if (currentQuery === '') {\n    iziToast.warning({\n      title: 'Warning',\n      message: 'Please enter a search term.',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  const gallery = document.getElementById('gallery');\n  gallery.innerHTML = '';\n  loadMoreBtn.style.display = 'none';\n  loader.style.display = 'block';\n\n  try {\n    const data = await fetchImages(currentQuery, currentPage);\n    renderImages(data.hits);\n    if (data.totalHits > PER_PAGE) {\n      loadMoreBtn.style.display = 'block';\n    }\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    iziToast.error({\n      title: 'Error',\n      message: 'Failed to fetch images.',\n      position: 'topRight',\n    });\n  } finally {\n    loader.style.display = 'none';\n  }\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n  currentPage += 1;\n  loader.style.display = 'block';\n\n  try {\n    const data = await fetchImages(currentQuery, currentPage);\n    renderImages(data.hits, true);\n    if (currentPage * PER_PAGE >= data.totalHits) {\n      loadMoreBtn.style.display = 'none';\n      iziToast.info({\n        title: 'Info',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n    }\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    iziToast.error({\n      title: 'Error',\n      message: 'Failed to fetch images.',\n      position: 'topRight',\n    });\n  } finally {\n    loader.style.display = 'none';\n  }\n});\n"],"names":["API_KEY","BASE_URL","PER_PAGE","fetchImages","query","page","url","axios","error","lightbox","renderImages","images","append","gallery","iziToast","imageElements","image","SimpleLightbox","cardHeight","currentPage","currentQuery","form","loader","loadMoreBtn","event","data"],"mappings":"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"}